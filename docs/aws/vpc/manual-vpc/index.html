<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.110.0">
    <meta name="generator" content="Relearn 5.3.3+tip">
    <meta name="description" content="Walkthrough of a VPC creation in AWS">
    <meta name="author" content="Nicolas Michel">
    <title>Create a VPC - Manual - My Cloud Networking, Automation and Triathlon Blog</title>
    <link href="/images/favicon.png?1677526975" rel="icon" type="image/png">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="/css/fontawesome-all.min.css?1677526975" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1677526975" rel="stylesheet"></noscript>
    <link href="/css/featherlight.min.css?1677526975" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/featherlight.min.css?1677526975" rel="stylesheet"></noscript>
    <link href="/css/auto-complete.css?1677526975" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1677526975" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1677526975" rel="stylesheet">
    <link href="/css/nucleus.css?1677526975" rel="stylesheet">
    <link href="/css/fonts.css?1677526975" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1677526975" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1677526975" rel="stylesheet">
    <link href="/css/theme-blue.css?1677526975" rel="stylesheet" id="variant-style">
    <link href="/css/ie.css?1677526975" rel="stylesheet">
    <link href="/css/variant.css?1677526975" rel="stylesheet">
    <link href="/css/print.css?1677526975" rel="stylesheet" media="print">
    <script src="/js/variant.js?1677526975"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      var index_url="/index.json";
      var root_url="/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      // some further base stuff
      var baseUriFull='http:\/\/blog.vpackets.net/';
      window.variants && variants.init( [ 'blue' ] );
    </script>
    <script src="/js/jquery.min.js?1677526975" defer></script>
  </head>
  <body class="mobile-support default" data-url="/aws/vpc/manual-vpc/">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <span id="toc-menu" title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span>
            <span class="links">
              Create a VPC - Manual
            </span>
          </div>
          <div class="default-animation progress">
            <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#bonus">Bonus</a></li>
  </ul>
</nav>
            </div>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <div id="head-tags">
          </div>
          <article class="default">
<h1>Create a VPC - Manual</h1>

<p>In this blogpost we are going to create a <a href="https://docs.aws.amazon.com/vpc/">Virtual Private Cloud</a> in <a href="https://aws.amazon.com/">Amazon Web Services</a> that will host all the shared services generally deployed by an IT team.
Since networking is fundamental to allow communication between servers and computers, every cloud service providers use a dedicated network construct. AWS and Google Cloud call it a VPC, while Azure for example calls it a VNET (virtual network).</p>
<p>Network constructs are different between cloud providers. For example, a VPC is global in Google Cloud while it is a regional construct in AWS. This blogpost is not targeted to highlight the networking differences between AWS and GCP (more on that in a dedicated blogpost).</p>
<p>As AWS mentions, &ldquo;A <a href="https://aws.amazon.com/about-aws/global-infrastructure/regions_az/">region</a> is a physical location around the world where we cluster data centers. We call each group of logical data centers an Availability Zone. Each AWS Region consists of multiple, isolated, and physically separate AZs within a geographic area. Unlike other cloud providers, who often define a region as a single data center, the multiple AZ design of every AWS Region offers advantages for customers. Each AZ has independent power, cooling, and physical security and is connected via redundant, ultra-low-latency networks. AWS customers focused on high availability can design their applications to run in multiple AZs to achieve even greater fault-tolerance. AWS infrastructure Regions meet the highest levels of security, compliance, and data protection.</p>
<p>What we are trying to achieve is the following:</p>
<p><img src="/images/aws/vpc/manual-vpc/Fig1-aws-vpc.png" alt="AWS VPC"></p>
<p>That&rsquo;s the diagram of a very general VPC that can created using the AWS Console. We will also cover how to create a VPC using several automation tools like the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html">AWS CLI</a> and <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/vpc">Hashicorp Terraform</a> and here is an <a href="https://github.com/terraform-aws-modules/terraform-aws-vpc">example</a></p>
<p>The AWS console offers the choice to create juste a simple VPC without any other additionnal network construct or the entiore VPC with all the objects needed to allow communication between your entities (Route table, Security Group, NAT and Internet gateways). In our example we will be using the options that allows us to create all networking construct at once.</p>
<ul>
<li>
<p>CIDR:</p>
<ul>
<li>This VPC has a CIDR or 10.0.10.0/24 and AWS will automatically create 2 publics subnets and 2 private subnets.</li>
<li>These public and private subnets will be shared between the availability chosen during the creation process.</li>
</ul>
</li>
<li>
<p>No IPv6 is required for now.</p>
</li>
<li>
<p>Number of Availability zones: 2 is sufficient</p>
</li>
<li>
<p>Number of public and private subnets: 2 each (even though only 1 public is sufficient, our VPC might need additional private and public subnets later on.)</p>
</li>
<li>
<p>NAT Gateway: None.</p>
</li>
</ul>
<p>The following picture shows how to create your VPC:</p>
<p><img src="/images/aws/vpc/manual-vpc/Fig2-aws-vpc-console.png" alt="AWS VPC Console"></p>
<p>For now we do not have to take care of any <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html">Elastic IP Address</a> as we will ask AWS to assign a public IP to our controller when we deploy it.</p>
<p>Finally the AWS Console will confirm that all the objects within the VPC have been created:</p>
<p><img src="/images/aws/vpc/manual-vpc/Fig3-aws-vpc-created.png" alt="AWS VPC Created"></p>
<p>The next picture will demonstrate the automatically created subnets and route tables for the specifically mentionned availability zones.</p>
<p><img src="/images/aws/vpc/manual-vpc/Fig4-aws-vpc-subnets.png" alt="AWS VPC Subnets"></p>
<p>If we have a look at the route tables associated with that VPC, we can see that each private subnet has its own routing table. The public subnets share the same public route table:</p>
<p><img src="/images/aws/vpc/manual-vpc/Fig5-aws-vpc-routetable.png" alt="AWS VPC Subnets"></p>
<p>When you dig into the <strong>&ldquo;AWS-UE1-VPC-MGMT-rtb-public&rdquo;</strong> routing table, we can see that it has two routes for now :</p>
<ul>
<li><strong>10.0.10.0/24</strong>, that is local</li>
<li><strong>0.0.0.0/0</strong>, the default route that points to an internet gateway.</li>
</ul>
<p>Now if we deploy an EC2 instance into any public subnet that belongs to the Region/AZ created previously, we should have connectivity to reach the internet. If we want to authorize inbound traffic to that EC2 instance, we need to allow that traffic using the stateful AWS <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html">Security Groups</a>.</p>
<p>Our VPC should be ready to host our <a href="https://docs.aviatrix.com/HowTos/controller_config.html">Aviatrix Controller</a> to start out multicloud journey.</p>
<h2 id="bonus">Bonus</h2>
<p>If you want to verify using the CLI (some of us are still network engineers right ?) you can configure your computer following this <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html">doc</a>.</p>
<p>(I will reduce the amount of information in the outputs below to focus on what&rsquo;s important. For example, this output should also list the default VPCs but I will not list it)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ aws ec2 describe-vpcs | jq
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;Vpcs&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;CidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.0/24&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;DhcpOptionsId&#34;</span>: <span style="color:#f1fa8c">&#34;dopt-0a943645c8bc81085&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;available&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;VpcId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-08aee6f377637f9ae&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;OwnerId&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;InstanceTenancy&#34;</span>: <span style="color:#f1fa8c">&#34;default&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;CidrBlockAssociationSet&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;AssociationId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-cidr-assoc-04f586cab46d8b000&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;CidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.0/24&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;CidrBlockState&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;associated&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;IsDefault&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Tags&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Key&#34;</span>: <span style="color:#f1fa8c">&#34;Name&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Value&#34;</span>: <span style="color:#f1fa8c">&#34;AWS-UE1-VPC-MGMT&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We can also check for the subnets created.</p>
<pre tabindex="0"><code>$ aws ec2 describe-subnets --filters &#34;Name=vpc-id,Values=vpc-08aee6f377637f9ae&#34; | jq
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;Subnets&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailabilityZone&#34;</span>: <span style="color:#f1fa8c">&#34;us-east-1b&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailabilityZoneId&#34;</span>: <span style="color:#f1fa8c">&#34;use1-az1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailableIpAddressCount&#34;</span>: <span style="color:#bd93f9">11</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;CidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.16/28&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;DefaultForAz&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;MapPublicIpOnLaunch&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;MapCustomerOwnedIpOnLaunch&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;available&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;SubnetId&#34;</span>: <span style="color:#f1fa8c">&#34;subnet-07c81d6d42836a8f9&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;VpcId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-08aee6f377637f9ae&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;OwnerId&#34;</span>: <span style="color:#f1fa8c">&#34; &#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AssignIpv6AddressOnCreation&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Ipv6CidrBlockAssociationSet&#34;</span>: [],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Tags&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Key&#34;</span>: <span style="color:#f1fa8c">&#34;Name&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Value&#34;</span>: <span style="color:#f1fa8c">&#34;AWS-UE1-VPC-MGMT -subnet-public2-us-east-1b&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;SubnetArn&#34;</span>: <span style="color:#f1fa8c">&#34;arn:aws:ec2:us-east-1: :subnet/subnet-07c81d6d42836a8f9&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;EnableDns64&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Ipv6Native&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;PrivateDnsNameOptionsOnLaunch&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;HostnameType&#34;</span>: <span style="color:#f1fa8c">&#34;ip-name&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;EnableResourceNameDnsARecord&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;EnableResourceNameDnsAAAARecord&#34;</span>: <span style="color:#ff79c6">false</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailabilityZone&#34;</span>: <span style="color:#f1fa8c">&#34;us-east-1b&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailabilityZoneId&#34;</span>: <span style="color:#f1fa8c">&#34;use1-az1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailableIpAddressCount&#34;</span>: <span style="color:#bd93f9">11</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;CidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.144/28&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;DefaultForAz&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;MapPublicIpOnLaunch&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;MapCustomerOwnedIpOnLaunch&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;available&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;SubnetId&#34;</span>: <span style="color:#f1fa8c">&#34;subnet-0f75d35ae1da469cc&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;VpcId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-08aee6f377637f9ae&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;OwnerId&#34;</span>: <span style="color:#f1fa8c">&#34; &#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AssignIpv6AddressOnCreation&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Ipv6CidrBlockAssociationSet&#34;</span>: [],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Tags&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Key&#34;</span>: <span style="color:#f1fa8c">&#34;Name&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Value&#34;</span>: <span style="color:#f1fa8c">&#34;AWS-UE1-VPC-MGMT -subnet-private2-us-east-1b&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;SubnetArn&#34;</span>: <span style="color:#f1fa8c">&#34;arn:aws:ec2:us-east-1: :subnet/subnet-0f75d35ae1da469cc&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;EnableDns64&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Ipv6Native&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;PrivateDnsNameOptionsOnLaunch&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;HostnameType&#34;</span>: <span style="color:#f1fa8c">&#34;ip-name&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;EnableResourceNameDnsARecord&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;EnableResourceNameDnsAAAARecord&#34;</span>: <span style="color:#ff79c6">false</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailabilityZone&#34;</span>: <span style="color:#f1fa8c">&#34;us-east-1a&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailabilityZoneId&#34;</span>: <span style="color:#f1fa8c">&#34;use1-az6&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailableIpAddressCount&#34;</span>: <span style="color:#bd93f9">11</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;CidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.128/28&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;DefaultForAz&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;MapPublicIpOnLaunch&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;MapCustomerOwnedIpOnLaunch&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;available&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;SubnetId&#34;</span>: <span style="color:#f1fa8c">&#34;subnet-0c363777a7f301bc2&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;VpcId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-08aee6f377637f9ae&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;OwnerId&#34;</span>: <span style="color:#f1fa8c">&#34; &#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AssignIpv6AddressOnCreation&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Ipv6CidrBlockAssociationSet&#34;</span>: [],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Tags&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Key&#34;</span>: <span style="color:#f1fa8c">&#34;Name&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Value&#34;</span>: <span style="color:#f1fa8c">&#34;AWS-UE1-VPC-MGMT -subnet-private1-us-east-1a&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;SubnetArn&#34;</span>: <span style="color:#f1fa8c">&#34;arn:aws:ec2:us-east-1: :subnet/subnet-0c363777a7f301bc2&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;EnableDns64&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Ipv6Native&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;PrivateDnsNameOptionsOnLaunch&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;HostnameType&#34;</span>: <span style="color:#f1fa8c">&#34;ip-name&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;EnableResourceNameDnsARecord&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;EnableResourceNameDnsAAAARecord&#34;</span>: <span style="color:#ff79c6">false</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailabilityZone&#34;</span>: <span style="color:#f1fa8c">&#34;us-east-1a&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailabilityZoneId&#34;</span>: <span style="color:#f1fa8c">&#34;use1-az6&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AvailableIpAddressCount&#34;</span>: <span style="color:#bd93f9">11</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;CidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.0/28&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;DefaultForAz&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;MapPublicIpOnLaunch&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;MapCustomerOwnedIpOnLaunch&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;available&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;SubnetId&#34;</span>: <span style="color:#f1fa8c">&#34;subnet-0f2351620e76a54d7&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;VpcId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-08aee6f377637f9ae&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;OwnerId&#34;</span>: <span style="color:#f1fa8c">&#34; &#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;AssignIpv6AddressOnCreation&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Ipv6CidrBlockAssociationSet&#34;</span>: [],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Tags&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Key&#34;</span>: <span style="color:#f1fa8c">&#34;Name&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Value&#34;</span>: <span style="color:#f1fa8c">&#34;AWS-UE1-VPC-MGMT -subnet-public1-us-east-1a&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;SubnetArn&#34;</span>: <span style="color:#f1fa8c">&#34;arn:aws:ec2:us-east-1: :subnet/subnet-0f2351620e76a54d7&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;EnableDns64&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Ipv6Native&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;PrivateDnsNameOptionsOnLaunch&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;HostnameType&#34;</span>: <span style="color:#f1fa8c">&#34;ip-name&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;EnableResourceNameDnsARecord&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">&#34;EnableResourceNameDnsAAAARecord&#34;</span>: <span style="color:#ff79c6">false</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then we can have a look at the route tables that are associated with the VPC created previously.</p>
<pre tabindex="0"><code>
$ aws ec2 describe-route-tables --filters &#34;Name=vpc-id,Values=vpc-08aee6f377637f9ae&#34; | jq
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;RouteTables&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Associations&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Main&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableAssociationId&#34;</span>: <span style="color:#f1fa8c">&#34;rtbassoc-02429aa65c6ca4696&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-04083da70542085d7&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;SubnetId&#34;</span>: <span style="color:#f1fa8c">&#34;subnet-0f75d35ae1da469cc&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;AssociationState&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;associated&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;PropagatingVgws&#34;</span>: [],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-04083da70542085d7&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Routes&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;DestinationCidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.0/24&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;GatewayId&#34;</span>: <span style="color:#f1fa8c">&#34;local&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Origin&#34;</span>: <span style="color:#f1fa8c">&#34;CreateRouteTable&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;active&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;DestinationPrefixListId&#34;</span>: <span style="color:#f1fa8c">&#34;pl-63a5400a&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;GatewayId&#34;</span>: <span style="color:#f1fa8c">&#34;vpce-07c5489eece54ac5c&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Origin&#34;</span>: <span style="color:#f1fa8c">&#34;CreateRoute&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;active&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Tags&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Key&#34;</span>: <span style="color:#f1fa8c">&#34;Name&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Value&#34;</span>: <span style="color:#f1fa8c">&#34;AWS-UE1-VPC-MGMT -rtb-private2-us-east-1b&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;VpcId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-08aee6f377637f9ae&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;OwnerId&#34;</span>: <span style="color:#f1fa8c">&#34;   &#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Associations&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Main&#34;</span>: <span style="color:#ff79c6">true</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableAssociationId&#34;</span>: <span style="color:#f1fa8c">&#34;rtbassoc-032f087a7405940dd&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-050a2ad500f057f3b&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;AssociationState&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;associated&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;PropagatingVgws&#34;</span>: [],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-050a2ad500f057f3b&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Routes&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;DestinationCidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.0/24&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;GatewayId&#34;</span>: <span style="color:#f1fa8c">&#34;local&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Origin&#34;</span>: <span style="color:#f1fa8c">&#34;CreateRouteTable&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;active&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Tags&#34;</span>: [],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;VpcId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-08aee6f377637f9ae&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;OwnerId&#34;</span>: <span style="color:#f1fa8c">&#34;   &#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Associations&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Main&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableAssociationId&#34;</span>: <span style="color:#f1fa8c">&#34;rtbassoc-049270142f38cc317&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-0726a61879b6886c8&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;SubnetId&#34;</span>: <span style="color:#f1fa8c">&#34;subnet-07c81d6d42836a8f9&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;AssociationState&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;associated&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Main&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableAssociationId&#34;</span>: <span style="color:#f1fa8c">&#34;rtbassoc-0f4a7bb9b742f8840&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-0726a61879b6886c8&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;SubnetId&#34;</span>: <span style="color:#f1fa8c">&#34;subnet-0f2351620e76a54d7&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;AssociationState&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;associated&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;PropagatingVgws&#34;</span>: [],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-0726a61879b6886c8&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Routes&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;DestinationCidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.0/24&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;GatewayId&#34;</span>: <span style="color:#f1fa8c">&#34;local&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Origin&#34;</span>: <span style="color:#f1fa8c">&#34;CreateRouteTable&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;active&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;DestinationCidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;0.0.0.0/0&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;GatewayId&#34;</span>: <span style="color:#f1fa8c">&#34;igw-08cb7b3514b815ae0&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Origin&#34;</span>: <span style="color:#f1fa8c">&#34;CreateRoute&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;active&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Tags&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Key&#34;</span>: <span style="color:#f1fa8c">&#34;Name&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Value&#34;</span>: <span style="color:#f1fa8c">&#34;AWS-UE1-VPC-MGMT -rtb-public&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;VpcId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-08aee6f377637f9ae&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;OwnerId&#34;</span>: <span style="color:#f1fa8c">&#34;   &#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Associations&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Main&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableAssociationId&#34;</span>: <span style="color:#f1fa8c">&#34;rtbassoc-0a9141e0861dbca9c&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-0bbeb2d8088d29033&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;SubnetId&#34;</span>: <span style="color:#f1fa8c">&#34;subnet-0c363777a7f301bc2&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;AssociationState&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;associated&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;PropagatingVgws&#34;</span>: [],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-0bbeb2d8088d29033&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Routes&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;DestinationCidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.0/24&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;GatewayId&#34;</span>: <span style="color:#f1fa8c">&#34;local&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Origin&#34;</span>: <span style="color:#f1fa8c">&#34;CreateRouteTable&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;active&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;DestinationPrefixListId&#34;</span>: <span style="color:#f1fa8c">&#34;pl-63a5400a&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;GatewayId&#34;</span>: <span style="color:#f1fa8c">&#34;vpce-07c5489eece54ac5c&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Origin&#34;</span>: <span style="color:#f1fa8c">&#34;CreateRoute&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;active&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Tags&#34;</span>: [dzoo
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Key&#34;</span>: <span style="color:#f1fa8c">&#34;Name&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Value&#34;</span>: <span style="color:#f1fa8c">&#34;AWS-UE1-VPC-MGMT -rtb-private1-us-east-1a&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;VpcId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-08aee6f377637f9ae&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;OwnerId&#34;</span>: <span style="color:#f1fa8c">&#34;   &#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Finally, let&rsquo;s dig deeper and have a look at the public routing tables entries and how it is associated.</p>
<p>We can see that this routing table is shared with 2 subnets: subnet-07c81d6d42836a8f9 and subnet-0f2351620e76a54d7 (both public subnets in the VPC on different AZ).</p>
<p>The routing table has the 2 entries mentionned above:</p>
<ul>
<li>10.0.10.0/24 for the local subnet</li>
<li>0.0.0.0/0 that points to the internet gateway (igw-08cb7b3514b815ae0) used by the public subnet in the VPC</li>
</ul>
<pre tabindex="0"><code>aws ec2 describe-route-tables --filters &#34;Name=tag:Name,Values=AWS-UE1-VPC-MGMT -rtb-public&#34; | jq
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;RouteTables&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Associations&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Main&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableAssociationId&#34;</span>: <span style="color:#f1fa8c">&#34;rtbassoc-049270142f38cc317&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-0726a61879b6886c8&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;SubnetId&#34;</span>: <span style="color:#f1fa8c">&#34;subnet-07c81d6d42836a8f9&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;AssociationState&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;associated&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Main&#34;</span>: <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableAssociationId&#34;</span>: <span style="color:#f1fa8c">&#34;rtbassoc-0f4a7bb9b742f8840&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-0726a61879b6886c8&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;SubnetId&#34;</span>: <span style="color:#f1fa8c">&#34;subnet-0f2351620e76a54d7&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;AssociationState&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;associated&#34;</span>
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;PropagatingVgws&#34;</span>: [],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;RouteTableId&#34;</span>: <span style="color:#f1fa8c">&#34;rtb-0726a61879b6886c8&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Routes&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;DestinationCidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;10.0.10.0/24&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;GatewayId&#34;</span>: <span style="color:#f1fa8c">&#34;local&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Origin&#34;</span>: <span style="color:#f1fa8c">&#34;CreateRouteTable&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;active&#34;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;DestinationCidrBlock&#34;</span>: <span style="color:#f1fa8c">&#34;0.0.0.0/0&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;GatewayId&#34;</span>: <span style="color:#f1fa8c">&#34;igw-08cb7b3514b815ae0&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Origin&#34;</span>: <span style="color:#f1fa8c">&#34;CreateRoute&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;State&#34;</span>: <span style="color:#f1fa8c">&#34;active&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;Tags&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Key&#34;</span>: <span style="color:#f1fa8c">&#34;Name&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">&#34;Value&#34;</span>: <span style="color:#f1fa8c">&#34;AWS-UE1-VPC-MGMT -rtb-public&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;VpcId&#34;</span>: <span style="color:#f1fa8c">&#34;vpc-08aee6f377637f9ae&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">&#34;OwnerId&#34;</span>: <span style="color:#f1fa8c">&#34;   &#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>last edited: October 28th 2022</p>

            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="sidebar" class="default-animation">
      <div id="header-wrapper" class="default-animation">
        <div id="header" class="default-animation">
 


 <!DOCTYPE html>
 <html>
    <head>
    </head>
    <body>
       <a href="http://blog.vpackets.net/">
          <img alt="logo" src="/images/logo/vpackets-logo-white.png">
       </a>
    </body>
 </html>
        </div>
        <div class="searchbox default-animation">
          <label class="a11y-only" for="search-by">Search</label>
          <i class="fas fa-search"></i>
          <input data-search-input id="search-by" type="search" placeholder="Search...">
          <span data-search-clear=""><i class="fas fa-times"></i></span>
        </div>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1677526975" defer></script>
        <script src="/js/lunr.min.js?1677526975" defer></script>
        <script src="/js/lunr.stemmer.support.min.js?1677526975" defer></script>
        <script src="/js/lunr.multi.min.js?1677526975" defer></script>
        <script src="/js/lunr.en.min.js?1677526975" defer></script>
        <script src="/js/search.js?1677526975" defer></script>
      </div>
      <div id="content-wrapper" class="highlightable">
        <ul class="topics">
          <li data-nav-id="/aws/" class="dd-item parent alwaysopen"><a href="/aws/"><b>AWS</b> </a><ul id="subsections-db8ac1d891f3a128ac6dc30cdc5237df">
          <li data-nav-id="/aws/certification-saa_c03/" class="dd-item alwaysopen"><a href="/aws/certification-saa_c03/">Certification - SAA C03</a><ul id="subsections-7a830d2ca36b155c41b9988bc32a5d96">
          <li data-nav-id="/aws/certification-saa_c03/introduction/" class="dd-item"><a href="/aws/certification-saa_c03/introduction/">Introduction</a></li></ul></li>
          <li data-nav-id="/aws/vpc/" class="dd-item parent alwaysopen"><a href="/aws/vpc/">Networking</a><ul id="subsections-eedb28a2d43a03290b8827bc6e7cbe62">
          <li data-nav-id="/aws/vpc/manual-vpc/" class="dd-item active"><a href="/aws/vpc/manual-vpc/">Create a VPC - Manual</a></li>
          <li data-nav-id="/aws/vpc/automation-vpc/" class="dd-item"><a href="/aws/vpc/automation-vpc/">Create a VPC - Terraform</a></li></ul></li></ul></li>
          <li data-nav-id="/security/" class="dd-item alwaysopen"><a href="/security/"><b>Security</b> </a><ul id="subsections-4e896db703975006e00bbc21e8553d62">
          <li data-nav-id="/security/ssh/" class="dd-item alwaysopen"><a href="/security/ssh/">SSH</a><ul id="subsections-0211419164a3e7de35da1411b38d3cbc">
          <li data-nav-id="/security/ssh/ssh-to-cisco-isr/" class="dd-item"><a href="/security/ssh/ssh-to-cisco-isr/">SSH To Cisco devices</a></li></ul></li></ul></li>
        </ul>
        <div id="shortcuts">
          <div class="nav-title">More</div>
          <ul>
            <li><a class="padding" href="https://www.linkedin.com/in/mclnicolas/"><i class='fab fa-fw fa-linkedin'></i> Linkedin</a></li>
            <li><a class="padding" href="https://github.com/vPackets/vPackets-blog/blob/main/static/CV/CV%20Nicolas%20MICHEL%202023.pdf"><i class='fab fa-fw fa-slack'></i> Resume / CV</a></li>
            <li><a class="padding" href="https://www.twitter.com/vpackets/"><i class='fab fa-fw fa-twitter'></i> Twitter</a></li>
            <li><a class="padding" href="https://www.youtube.com/@vpackets"><i class='fab fa-fw fa-youtube'></i> Youtube</a></li>
            <li><a class="padding" href="https://www.github.com/vpackets/"><i class='fab fa-fw fa-github'></i> Github</a></li>
            <li><a class="padding" href="https://www.strava.com/athletes/29752545"><i class='fab fa-fw fa-strava'></i> Strava</a></li>
          </ul>
        </div>
        <div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div>
        <hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter">
        <div id="prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks">
          <ul>
            <li id="select-language-container" class="footerLangSwitch">
              <div class="padding select-container">
                <i class="fas fa-language fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <label class="a11y-only" for="select-language">Language</label>
                  <select id="select-language" onchange="location = baseUri + this.value;">
                  </select>
                </div>
                <div class="select-clear"></div>
              </div>
            </li>
            <li id="select-variant-container" class="footerVariantSwitch">
              <div class="padding select-container">
                <i class="fas fa-paint-brush fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <label class="a11y-only" for="select-variant">Theme</label>
                  <select id="select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                    <option id="blue" value="blue" selected>Blue</option>
                  </select>
                </div>
                <div class="select-clear"></div>
              </div>
              <script>window.variants && variants.markSelectedVariant();</script>
            </li>
            <li class="footerVisitedLinks"><a class="padding" onclick="clearHistory();"><i class="fas fa-history fa-fw"></i> Clear History</a></li>
          </ul>
        </div>
        <div id="footer" class="footerFooter showFooter">
<style>
    #footer {
      font-size: .8125rem;
      height: 6.25rem;
      margin-left: auto;
      margin-right: auto;
      padding: 2rem 1rem;
      text-align: center;
      min-width: 14.375rem;
      max-width: 18.75rem;
    }
    #footer p {
      margin: 0;
    }
  </style>
  <a class="github-button" href="https://github.com/McShelby/hugo-theme-relearn/archive/main.zip" data-icon="octicon-cloud-download" aria-label="Download McShelby/hugo-theme-relearn on GitHub">Download</a>
  <a class="github-button" href="https://github.com/McShelby/hugo-theme-relearn" data-icon="octicon-star" data-show-count="true" aria-label="Star McShelby/hugo-theme-relearn on GitHub">Star</a>
  <a class="github-button" href="https://github.com/McShelby/hugo-theme-relearn/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork McShelby/hugo-theme-relearn on GitHub">Fork</a>
  <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
  <script async src="/js/buttons.js?1677526975"></script>
        </div>
      </div>
    </aside>
    <script src="/js/clipboard.min.js?1677526975" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1677526975" defer></script>
    <script src="/js/featherlight.min.js?1677526975" defer></script>
    <script>
      function useMathJax( config ){
        if( !Object.assign ){
          
          return;
        }
        window.MathJax = Object.assign( window.MathJax || {}, {
          loader: {
            load: ['[tex]/mhchem']
          },
          startup: {
            elements: [
              '.math'
            ]
          },
          tex: {
            inlineMath: [
              ['$', '$'], 
              ['\\(', '\\)']
            ]
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/jquery.svg.pan.zoom.js?1677526975" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="https://unpkg.com/rapidoc/dist/rapidoc-min.js" defer></script>
    <script>
      window.themeUseSwagger = JSON.parse("{ \"theme\": \"light\" }");
    </script>
    <script src="/js/theme.js?1677526975" defer></script>
  </body>
</html>
